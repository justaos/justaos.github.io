{"version":3,"file":"notification-manager.js","sourceRoot":"","sources":["../../../../src/components/content/notification-manager/notification-manager.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Element, h, Host, Listen, Prop, State } from '@stencil/core';\r\nimport { isDarkMode, observeThemeChange } from '../../../utils/utils';\r\n\r\nconst getNotificationIndex = (() => {\r\n  let counter = 1;\r\n  return (function() {\r\n    return `${counter++}`;\r\n  });\r\n})();\r\n\r\n/**\r\n * @name Notification Manager\r\n * @description Manages alert, toasts and notifications.\r\n * @img /assets/img/notification-manager.png\r\n */\r\n@Component({\r\n  tag: 'goat-notification-manager',\r\n  styleUrl: 'notification-manager.scss',\r\n  shadow: true,\r\n})\r\nexport class NotificationManager implements ComponentInterface {\r\n\r\n  @Prop({ reflect: true }) name: string = 'global';\r\n  @Prop() position: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' = 'bottom-right';\r\n\r\n  @Element() elm!: HTMLElement;\r\n  @State() notifications: any = [];\r\n  @State() isDarkMode: boolean = isDarkMode();\r\n\r\n\r\n  @Listen('goat:toast', { target: 'window' })\r\n  listenToast(evt) {\r\n    if ((evt.detail.target === this.name || this.name === 'global') && !evt.detail.procced) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      evt.detail.procced = true;\r\n      const notification = {\r\n        id: getNotificationIndex(),\r\n        type: 'toast',\r\n        message: evt.detail.message,\r\n        state: evt.detail.state,\r\n        hide: false,\r\n      };\r\n      this.notifications = this.notifications.concat([notification]).filter(n => !n.hide);\r\n      setTimeout(() => {\r\n        notification.hide = true;\r\n        this.notifications = [...this.notifications];\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  @Listen('goat:notification', { target: 'window' })\r\n  listenNotification(evt) {\r\n    if ((evt.detail.target === this.name || this.name === 'global') && !evt.detail.procced) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      evt.detail.procced = true;\r\n      const notification = {\r\n        id: getNotificationIndex(),\r\n        type: 'notification',\r\n        title: evt.detail.title,\r\n        subtitle: evt.detail.subtitle,\r\n        messageType: evt.detail.messageType,\r\n        state: evt.detail.state,\r\n        hide: false,\r\n      };\r\n      this.notifications = this.notifications.concat([notification]).filter(n => !n.hide);\r\n      setTimeout(() => {\r\n        notification.hide = true;\r\n        this.notifications = [...this.notifications];\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  componentWillLoad() {\r\n    observeThemeChange(() => {\r\n      this.isDarkMode = isDarkMode();\r\n    });\r\n  }\r\n\r\n  renderNotification(notification) {\r\n    if (notification.type) {\r\n      switch (notification.type) {\r\n        case 'toast':\r\n          return (\r\n            <goat-toast id={`${notification.id}`} state={notification.state} message={notification.message} />\r\n          );\r\n        case 'alert':\r\n          return (\r\n            <goat-alert {...notification.props} />\r\n          );\r\n        case 'notification':\r\n          return (\r\n            <goat-notification id={`${notification.id}`} state={notification.state}>\r\n              <div innerHTML={notification.title} slot=\"title\"/>\r\n              <div innerHTML={notification.subtitle} slot=\"subtitle\"/>\r\n            </goat-notification>\r\n          );\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={{ 'notification-manager': true, [`position-${this.position}`]: true }}>\r\n          {this.notifications.map((notification) => (\r\n            <div class={{ 'notification': true, 'hidden': notification.hide }}>\r\n              {this.renderNotification(notification)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n"]}