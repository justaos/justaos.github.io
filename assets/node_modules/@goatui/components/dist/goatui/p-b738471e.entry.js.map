{"version":3,"sources":["src/components/content/notification-manager/notification-manager.scss?tag=goat-notification-manager&encapsulation=shadow","src/components/content/notification-manager/notification-manager.tsx"],"names":["notificationManagerCss","getNotificationIndex","counter","NotificationManager","[object Object]","hostRef","this","name","position","notifications","isDarkMode","evt","detail","target","procced","preventDefault","stopPropagation","notification","id","type","message","state","hide","concat","filter","n","setTimeout","title","subtitle","messageType","observeThemeChange","h","Object","assign","props","innerHTML","slot","Host","class","notification-manager","map","hidden","renderNotification"],"mappings":"oGAAA,MAAMA,EAAyB,snDCG/B,MAAMC,EAAuB,MAC3B,IAAIC,EAAU,EACd,OAAA,WACE,MAAO,GAAGA,QAHe,SAiBhBC,EAAmB,MALhCC,YAAAC,aAO2BC,KAAAC,KAAe,SAChCD,KAAAE,SAAsE,eAGrEF,KAAAG,cAAqB,GACrBH,KAAAI,WAAsBA,IAI/BN,YAAYO,GACV,IAAKA,EAAIC,OAAOC,SAAWP,KAAKC,MAAQD,KAAKC,OAAS,YAAcI,EAAIC,OAAOE,QAAS,CACtFH,EAAII,iBACJJ,EAAIK,kBACJL,EAAIC,OAAOE,QAAU,KACrB,MAAMG,EAAe,CACnBC,GAAIjB,IACJkB,KAAM,QACNC,QAAST,EAAIC,OAAOQ,QACpBC,MAAOV,EAAIC,OAAOS,MAClBC,KAAM,OAERhB,KAAKG,cAAgBH,KAAKG,cAAcc,OAAO,CAACN,IAAeO,QAAOC,IAAMA,EAAEH,OAC9EI,YAAW,KACTT,EAAaK,KAAO,KACpBhB,KAAKG,cAAgB,IAAIH,KAAKG,iBAC7B,MAKPL,mBAAmBO,GACjB,IAAKA,EAAIC,OAAOC,SAAWP,KAAKC,MAAQD,KAAKC,OAAS,YAAcI,EAAIC,OAAOE,QAAS,CACtFH,EAAII,iBACJJ,EAAIK,kBACJL,EAAIC,OAAOE,QAAU,KACrB,MAAMG,EAAe,CACnBC,GAAIjB,IACJkB,KAAM,eACNQ,MAAOhB,EAAIC,OAAOe,MAClBC,SAAUjB,EAAIC,OAAOgB,SACrBC,YAAalB,EAAIC,OAAOiB,YACxBR,MAAOV,EAAIC,OAAOS,MAClBC,KAAM,OAERhB,KAAKG,cAAgBH,KAAKG,cAAcc,OAAO,CAACN,IAAeO,QAAOC,IAAMA,EAAEH,OAC9EI,YAAW,KACTT,EAAaK,KAAO,KACpBhB,KAAKG,cAAgB,IAAIH,KAAKG,iBAC7B,MAIPL,oBACE0B,GAAmB,KACjBxB,KAAKI,WAAaA,OAItBN,mBAAmBa,GACjB,GAAIA,EAAaE,KAAM,CACrB,OAAQF,EAAaE,MACnB,IAAK,QACH,OACEY,EAAA,aAAA,CAAYb,GAAI,GAAGD,EAAaC,KAAMG,MAAOJ,EAAaI,MAAOD,QAASH,EAAaG,UAE3F,IAAK,QACH,OACEW,EAAA,aAAAC,OAAAC,OAAA,GAAgBhB,EAAaiB,QAEjC,IAAK,eACH,OACEH,EAAA,oBAAA,CAAmBb,GAAI,GAAGD,EAAaC,KAAMG,MAAOJ,EAAaI,OAC/DU,EAAA,MAAA,CAAKI,UAAWlB,EAAaU,MAAOS,KAAK,UACzCL,EAAA,MAAA,CAAKI,UAAWlB,EAAaW,SAAUQ,KAAK,cAGlD,QACE,OAAO,OAKfhC,SACE,OACE2B,EAACM,EAAI,KACHN,EAAA,MAAA,CAAKO,MAAO,CAAEC,uBAAwB,KAAMnC,CAAC,YAAYE,KAAKE,YAAa,OACxEF,KAAKG,cAAc+B,KAAKvB,GACvBc,EAAA,MAAA,CAAKO,MAAO,CAAErB,aAAgB,KAAMwB,OAAUxB,EAAaK,OACxDhB,KAAKoC,mBAAmBzB","sourcesContent":["@import \"../../../globalStyles/commons\";\r\n\r\n@keyframes reveal {\r\n  0% {\r\n    opacity: 0;\r\n    transform: translateY(1rem)\r\n  }\r\n}\r\n\r\n@keyframes hide {\r\n  100% {\r\n    opacity: 0;\r\n    transform: translateY(-1rem);\r\n    visibility: hidden;\r\n  }\r\n}\r\n\r\n\r\n:host {\r\n  display: block;\r\n  position: absolute;\r\n  z-index: v(--z-index-notification-manager);\r\n}\r\n\r\n:host([name='global']) {\r\n  position: fixed;\r\n  width: 300px;\r\n}\r\n\r\n.notification-manager {\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin: v(--spacing-4);\r\n\r\n  .notification {\r\n    animation: reveal 0.5s ease-in;\r\n  }\r\n\r\n  .notification.hidden {\r\n    visibility: hidden;\r\n    opacity: 0;\r\n\r\n    transition: visibility 0s ease-out 1s, opacity 1s ease-out;\r\n  }\r\n\r\n}\r\n\r\n:host([position=\"bottom-right\"]) {\r\n  bottom: 0;\r\n  right: 0;\r\n\r\n  .notification-manager {\r\n    align-items: flex-end;\r\n  }\r\n}\r\n\r\n:host([position=\"bottom-left\"]) {\r\n  bottom: 0;\r\n  left: 0;\r\n\r\n  .notification-manager {\r\n    align-items: flex-start;\r\n  }\r\n}\r\n\r\n:host([position=\"top-left\"]) {\r\n  top: 0;\r\n  left: 0;\r\n\r\n  .notification-manager {\r\n    align-items: flex-start;\r\n  }\r\n}\r\n\r\n:host([position=\"top-right\"]) {\r\n  top: 0;\r\n  right: 0;\r\n\r\n  .notification-manager {\r\n    align-items: flex-end;\r\n  }\r\n}\r\n\r\n","import { Component, ComponentInterface, Element, h, Host, Listen, Prop, State } from '@stencil/core';\r\nimport { isDarkMode, observeThemeChange } from '../../../utils/utils';\r\n\r\nconst getNotificationIndex = (() => {\r\n  let counter = 1;\r\n  return (function() {\r\n    return `${counter++}`;\r\n  });\r\n})();\r\n\r\n/**\r\n * @name Notification Manager\r\n * @description Manages alert, toasts and notifications.\r\n * @img /assets/img/notification-manager.png\r\n */\r\n@Component({\r\n  tag: 'goat-notification-manager',\r\n  styleUrl: 'notification-manager.scss',\r\n  shadow: true,\r\n})\r\nexport class NotificationManager implements ComponentInterface {\r\n\r\n  @Prop({ reflect: true }) name: string = 'global';\r\n  @Prop() position: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' = 'bottom-right';\r\n\r\n  @Element() elm!: HTMLElement;\r\n  @State() notifications: any = [];\r\n  @State() isDarkMode: boolean = isDarkMode();\r\n\r\n\r\n  @Listen('goat:toast', { target: 'window' })\r\n  listenToast(evt) {\r\n    if ((evt.detail.target === this.name || this.name === 'global') && !evt.detail.procced) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      evt.detail.procced = true;\r\n      const notification = {\r\n        id: getNotificationIndex(),\r\n        type: 'toast',\r\n        message: evt.detail.message,\r\n        state: evt.detail.state,\r\n        hide: false,\r\n      };\r\n      this.notifications = this.notifications.concat([notification]).filter(n => !n.hide);\r\n      setTimeout(() => {\r\n        notification.hide = true;\r\n        this.notifications = [...this.notifications];\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  @Listen('goat:notification', { target: 'window' })\r\n  listenNotification(evt) {\r\n    if ((evt.detail.target === this.name || this.name === 'global') && !evt.detail.procced) {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      evt.detail.procced = true;\r\n      const notification = {\r\n        id: getNotificationIndex(),\r\n        type: 'notification',\r\n        title: evt.detail.title,\r\n        subtitle: evt.detail.subtitle,\r\n        messageType: evt.detail.messageType,\r\n        state: evt.detail.state,\r\n        hide: false,\r\n      };\r\n      this.notifications = this.notifications.concat([notification]).filter(n => !n.hide);\r\n      setTimeout(() => {\r\n        notification.hide = true;\r\n        this.notifications = [...this.notifications];\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  componentWillLoad() {\r\n    observeThemeChange(() => {\r\n      this.isDarkMode = isDarkMode();\r\n    });\r\n  }\r\n\r\n  renderNotification(notification) {\r\n    if (notification.type) {\r\n      switch (notification.type) {\r\n        case 'toast':\r\n          return (\r\n            <goat-toast id={`${notification.id}`} state={notification.state} message={notification.message} />\r\n          );\r\n        case 'alert':\r\n          return (\r\n            <goat-alert {...notification.props} />\r\n          );\r\n        case 'notification':\r\n          return (\r\n            <goat-notification id={`${notification.id}`} state={notification.state}>\r\n              <div innerHTML={notification.title} slot=\"title\"/>\r\n              <div innerHTML={notification.subtitle} slot=\"subtitle\"/>\r\n            </goat-notification>\r\n          );\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class={{ 'notification-manager': true, [`position-${this.position}`]: true }}>\r\n          {this.notifications.map((notification) => (\r\n            <div class={{ 'notification': true, 'hidden': notification.hide }}>\r\n              {this.renderNotification(notification)}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n"]}