import{r as e,h as r,g as o}from"./p-0131d74d.js";import{r as i,t as a}from"./p-c2616a28.js";import{b as l,t,g as n,c,a as s,f as d}from"./p-18bd8fa8.js";import{s as v,i as u}from"./p-10aa5538.js";var w=36e5;function m(e,r){i(2,arguments);var o=t(r);return l(e,o*w)}function h(e,r){var o,l,c,s,d,v,u,w;i(1,arguments);var m=n();var h=t((o=(l=(c=(s=r===null||r===void 0?void 0:r.weekStartsOn)!==null&&s!==void 0?s:r===null||r===void 0?void 0:(d=r.locale)===null||d===void 0?void 0:(v=d.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&c!==void 0?c:m.weekStartsOn)!==null&&l!==void 0?l:(u=m.locale)===null||u===void 0?void 0:(w=u.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&o!==void 0?o:0);if(!(h>=0&&h<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var b=a(e);var f=b.getDay();var p=(f<h?7:0)+f-h;b.setDate(b.getDate()-p);b.setHours(0,0,0,0);return b}var b=864e5;function f(e,r){i(2,arguments);var o=v(e);var a=v(r);var l=o.getTime()-c(o);var t=a.getTime()-c(a);return Math.round((l-t)/b)}function p(e,r){var o=e.getFullYear()-r.getFullYear()||e.getMonth()-r.getMonth()||e.getDate()-r.getDate()||e.getHours()-r.getHours()||e.getMinutes()-r.getMinutes()||e.getSeconds()-r.getSeconds()||e.getMilliseconds()-r.getMilliseconds();if(o<0){return-1}else if(o>0){return 1}else{return o}}function y(e,r){i(2,arguments);var o=a(e);var l=a(r);var t=p(o,l);var n=Math.abs(f(o,l));o.setDate(o.getDate()-t*n);var c=Number(p(o,l)===-t);var s=t*(n-c);return s===0?0:s}function g(e){i(1,arguments);var r=a(e);r.setHours(23,59,59,999);return r}function x(e,r){var o,l,c,s,d,v,u,w;i(1,arguments);var m=n();var h=t((o=(l=(c=(s=r===null||r===void 0?void 0:r.weekStartsOn)!==null&&s!==void 0?s:r===null||r===void 0?void 0:(d=r.locale)===null||d===void 0?void 0:(v=d.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&c!==void 0?c:m.weekStartsOn)!==null&&l!==void 0?l:(u=m.locale)===null||u===void 0?void 0:(w=u.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&o!==void 0?o:0);if(!(h>=0&&h<=6)){throw new RangeError("weekStartsOn must be between 0 and 6 inclusively")}var b=a(e);var f=b.getDay();var p=(f<h?-7:0)+6-(f-h);b.setDate(b.getDate()+p);b.setHours(23,59,59,999);return b}function k(e,r=1){const o=h(e,{weekStartsOn:r});const i=x(e,{weekStartsOn:r});return{startDate:o,endDate:i,totalDays:7}}var z=undefined&&undefined.__classPrivateFieldGet||function(e,r,o,i){if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof r==="function"?e!==r||!i:!r.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?i:o==="a"?i.call(e):i?i.value:r.get(e)};var E=undefined&&undefined.__classPrivateFieldSet||function(e,r,o,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof r==="function"?e!==r||!a:!r.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(e,o):a?a.value=o:r.set(e,o),o};var D;class j{constructor(){D.set(this,[])}addEvents(e){E(this,D,z(this,D,"f").concat(e),"f")}getEvents(){return z(this,D,"f")}}D=new WeakMap;const T="*{box-sizing:border-box}:host{font-family:var(--font-family-base)}::selection{color:var(--color-white, #ffffff);background:var(--color-primary, var(--color-blue-60, #0f62fe))}::-webkit-scrollbar{width:var(--scrollbar-width, 0.75rem);height:var(--scrollbar-width, 0.75rem)}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888}::-webkit-scrollbar-thumb :hover{background:#555}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.center-content{display:flex;align-items:center;justify-content:center}:host([hidden]){display:none}@keyframes reveal{0%{opacity:0;transform:translateY(8px)}}:host{display:block;height:100%;--calendar-border-color:var(--ui-04, var(--color-gray-50, #8d8d8d));--scale-size:3rem;--scale-color:var(--text-placeholder, var(--color-gray-40, #a8a8a8))}.scale{width:var(--scale-size)}.calendar-column-view{display:flex;flex-direction:column;height:100%}.calendar-column-view .view-header{border-top:1px solid var(--border-color, var(--color-gray-50, #8d8d8d));display:flex}.calendar-column-view .view-header .scale{border-bottom:1px solid var(--scale-color, );border-right:1px solid var(--scale-color, )}.calendar-column-view .view-header .columns{display:flex;flex:1;border-bottom:1px solid var(--scale-color, )}.calendar-column-view .view-header .columns .column{flex:1;border-right:1px solid var(--scale-color, )}.calendar-column-view .view-header .columns .column .column-content{display:flex;border-top:0.5rem solid transparent;align-items:center;padding:0.5rem;gap:0.5rem}.calendar-column-view .view-header .columns .column.today .column-content{border-top-color:var(--color-primary, var(--color-blue-60, #0f62fe))}.calendar-column-view .view-header .columns .column.today .column-content .date{color:var(--color-primary, var(--color-blue-60, #0f62fe))}.calendar-column-view .view-header .columns .column .date{font-size:2rem;cursor:pointer;border-radius:100%;padding:0.5rem}.calendar-column-view .view-header .columns .column .date:hover{background:var(--color-primary-30, var(--color-blue-30, #a6c8ff))}.calendar-column-view .view-header .columns .column .day{font-size:1rem}.calendar-column-view .view-header .scrollbar-placeholder{width:var(--scrollbar-width)}.calendar-column-view .view-body{height:100%;border-bottom:1px solid var(--calendar-border-color, );overflow-y:scroll}.calendar-column-view .view-body .view-body-scroll{display:flex;position:relative}.calendar-column-view .view-body .view-body-scroll .scale{border-right:1px solid var(--scale-color, )}.calendar-column-view .view-body .view-body-scroll .scale .row{width:0;position:relative;height:2rem;border-bottom:1px dashed var(--scale-color, )}.calendar-column-view .view-body .view-body-scroll .scale .row.hour{border-bottom:1px solid var(--scale-color, );width:50%;margin-inline-start:50%}.calendar-column-view .view-body .view-body-scroll .scale .row:last-child{border-bottom:0}.calendar-column-view .view-body .view-body-scroll .scale .row .time{position:absolute;top:-0.5rem;font-size:0.75rem}.calendar-column-view .view-body .view-body-scroll .drawing-area{flex:1}.calendar-column-view .view-body .view-body-scroll .drawing-area .events-container{position:absolute;top:0;left:var(--scale-size);width:calc(100% - var(--scale-size));height:100%;display:flex}.calendar-column-view .view-body .view-body-scroll .drawing-area .events-container .column{flex:1;padding:0 1rem 0 1px}.calendar-column-view .view-body .view-body-scroll .drawing-area .events-container .column .column-content{position:relative;height:100%}.calendar-column-view .view-body .view-body-scroll .drawing-area .events-container .column .event{background:var(--color-primary-20, var(--color-blue-20, #d0e2ff));border-left:0.35rem solid var(--color-primary, var(--color-blue-60, #0f62fe));border-radius:3px;position:absolute}.calendar-column-view .view-body .view-body-scroll .drawing-area .events-container .column .event .event-title{padding:0.25rem}.calendar-column-view .view-body .view-body-scroll .current-time-line{position:absolute;z-index:100;pointer-events:none;width:calc(100% - var(--scale-size));margin-inline-start:var(--scale-size)}.calendar-column-view .view-body .view-body-scroll .current-time-line .time{position:absolute;font-size:0.5rem;font-weight:600;color:var(--color-primary, var(--color-blue-60, #0f62fe));top:-6px;left:-3rem;background:var(--color-primary-10, var(--color-blue-10, #edf5ff));padding:2px;border-radius:3px}.calendar-column-view .view-body .view-body-scroll .current-time-line .dash-line{position:absolute;left:0;border-bottom:1px dashed var(--color-primary, var(--color-blue-60, #0f62fe))}.calendar-column-view .view-body .view-body-scroll .current-time-line .dot{border-radius:100%;width:0.5rem;height:0.5rem;background:var(--color-primary, var(--color-blue-60, #0f62fe));display:block;position:absolute;top:-0.25rem}.calendar-column-view .view-body .view-body-scroll .current-time-line .line{border-bottom:2px solid var(--color-primary, var(--color-blue-60, #0f62fe));position:absolute;top:-1px}";const P=class{constructor(r){e(this,r);this.singleDayEvents={};this.events=[];this.view="week";this.days=7;this.currentTime=undefined;this.contextDate=undefined}async componentWillLoad(){this.manager=new j;this.manager.addEvents(this.events)}async componentDidLoad(){const e=this.elm.shadowRoot.querySelector(".view-body").scrollHeight;this.elm.shadowRoot.querySelector(".view-body").scroll({top:this.getTimePercent(this.currentTime)/100*e-150})}renderHeader(){const e=[];for(let o=new Date(this.dateRange.startDate);y(v(this.dateRange.endDate),o)>=0;o=s(o,1)){const i=["column"];const a=y(v(o),v(this.currentTime));if(a===0)i.push("today");else if(a<0)i.push("past");else if(a<0)i.push("future");e.push(r("div",{class:i.join(" ")},r("div",{class:"column-content"},r("div",{class:"date",onClick:()=>{alert("date clicked")}},d(o,"dd")),r("div",{class:"day"},d(o,"E")))))}return e}renderBackgroundColumns(){const e=[];for(let o=new Date(this.dateRange.startDate);y(v(this.dateRange.endDate),o)>=0;o=s(o,1)){const i=["column"];if(u(v(o),v(this.currentTime)))i.push("active");e.push(r("div",{class:i.join(" ")}))}return e}renderBodyBackground(){const e=[];for(let o=0;o<48;o++){const i=["row"];if(o%2)i.push("hour");const a=r("div",{class:i.join(" ")},this.renderBackgroundColumns());e.push(a)}return r("div",{class:"background"},e)}renderScale(){const e=[];for(let o=0;o<48;o++){const i=["row"];if(o%2)i.push("hour");const a=v(new Date);const l=r("div",{class:i.join(" ")},(()=>{if(o%2==0&&o){return r("div",{class:"time"},d(m(a,o/2),"hh a"))}})());e.push(l)}return r("div",{class:"background"},e)}renderEvents(){const e=[];for(let o=new Date(this.dateRange.startDate),i=0;y(v(this.dateRange.endDate),o)>=0;o=s(o,1),i++){const i=["column"];if(u(v(o),v(this.currentTime)))i.push("active");e.push(r("div",{class:i.join(" ")},r("div",{class:"column-content"},(()=>{})())))}return r("div",{class:"events-container"},e)}getDatePercent(){const e=y(v(this.currentTime),this.dateRange.startDate);return e/this.dateRange.totalDays*100}getTimePercent(e,r){if(!r)r=e;const o=v(r);const i=g(r);const a=(e.valueOf()-o.valueOf())/(i.valueOf()-o.valueOf())*100;if(a<0)return 0;if(a>100)return 100;return a}render(){if(this.view==="week"){this.dateRange=k(this.contextDate,1)}else{this.dateRange.startDate=v(this.contextDate);this.dateRange.endDate=g(s(this.contextDate,this.days-1));this.dateRange.totalDays=this.days}return r("div",{class:"calendar-column-view"},r("div",{class:"view-header"},r("div",{class:"scale"}),r("div",{class:"columns"},this.renderHeader()),r("div",{class:"scrollbar-placeholder"})),r("div",{class:"view-body"},r("div",{class:"view-body-scroll"},r("div",{class:"scale"},this.renderScale()),r("div",{class:"drawing-area"},r("goat-calendar-column-view-background",{columns:this.dateRange.totalDays}),this.renderEvents()),(()=>{if(this.currentTime.valueOf()>this.dateRange.startDate.valueOf()-1&&this.currentTime.valueOf()<this.dateRange.endDate.valueOf()+1){return r("div",{class:"current-time-line",style:{top:`calc(${this.getTimePercent(this.currentTime)}% - 1px)`}},r("div",{class:"time"},d(this.contextDate,"hh:mm a")),r("div",{class:"dash-line",style:{width:`${this.getDatePercent()}%`}}),r("div",{class:"dot",style:{left:`calc( ${this.getDatePercent()}% - 0.25rem)`}}),r("div",{class:"line",style:{left:`${this.getDatePercent()}%`,width:`${1/this.dateRange.totalDays*100}%`}}))}})())))}get elm(){return o(this)}};P.style=T;export{P as goat_calendar_column_view};
//# sourceMappingURL=p-8e96d346.entry.js.map